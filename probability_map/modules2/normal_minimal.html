<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Normal – Minimal Interactive Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    :root{ --bg:#f5f7f9; --panel:#ffffff; --ink:#111; --muted:#555; --border:#dcdcdc; --accent:#ef4444; }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0; font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--ink); background:var(--bg)}
    header{padding:10px 18px; background:#ef4444; color:#fff; font-weight:600}
    .wrap{max-width:1000px; margin:14px auto; padding:0 14px; display:grid; grid-template-columns: 320px 1fr; gap:14px}
    .card{background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:12px}
    .row{display:flex; align-items:center; gap:10px; margin:6px 0; flex-wrap:wrap}
    label{min-width:24px; color:#333; font-weight:600}
    input[type="range"]{width:140px}
    input[type="number"]{width:80px; padding:6px 8px; border:1px solid var(--border); border-radius:8px}
    .kblock{background:#fff; border:1px solid var(--border); border-radius:10px; padding:10px; margin-top:10px}
    .note{color:var(--muted); font-size:13px}
    .plot{background:#fff; border:1px solid var(--border); border-radius:12px; padding:10px}
    .plot h3{margin:0 0 6px 0; font-size:14px}
    canvas{width:100%; height:280px; display:block; background:#fafafa; border-radius:8px}
    @media (max-width: 900px){ .wrap{grid-template-columns: 1fr} }
  </style>
</head>
<body>
<header>Normal Distribution X ~ N(μ, σ²)</header>
<main class="wrap">
  <section class="card">
    <div class="row">
      <label for="mu">μ</label>
      <input id="mu" type="range" min="-5" max="5" step="0.1" value="0">
      <input id="muNum" type="number" min="-5" max="5" step="0.1" value="0">
      <span class="note">(mean)</span>
    </div>
    <div class="row">
      <label for="sigma">σ</label>
      <input id="sigma" type="range" min="0.5" max="3" step="0.1" value="1">
      <input id="sigmaNum" type="number" min="0.5" max="3" step="0.1" value="1">
      <span class="note">(standard deviation)</span>
    </div>

    <div class="kblock">
      <div class="note">Key facts</div>
      <ul class="note" style="margin:6px 0 0 16px">
        <li>Support: x ∈ (−∞, +∞)</li>
        <li>PDF: f(x) = (1/σ√2π) e^(−(x−μ)²/2σ²)</li>
        <li>Mean: E[X] = μ</li>
        <li>Variance: Var[X] = σ²</li>
        <li>68-95-99.7 rule applies to μ ± kσ</li>
        <li>If X ~ N(μ,σ²), then Z = (X−μ)/σ ~ N(0,1)</li>
      </ul>
    </div>

    <div class="kblock">
      <div class="note">Parameters</div>
      <div class="note">
        μ = <span id="muOut">0.0</span>,
        σ = <span id="sigmaOut">1.0</span>,
        σ² = <span id="varOut">1.00</span>
      </div>
    </div>
  </section>

  <section class="card">
    <div class="plot">
      <h3>PDF f(x)</h3>
      <canvas id="pdf"></canvas>
    </div>
  </section>
</main>

<script>
const muSlider = document.getElementById('mu');
const muNum = document.getElementById('muNum');
const sigmaSlider = document.getElementById('sigma');
const sigmaNum = document.getElementById('sigmaNum');

const muOut = document.getElementById('muOut');
const sigmaOut = document.getElementById('sigmaOut');
const varOut = document.getElementById('varOut');
const pdfCanvas = document.getElementById('pdf');

function setupCanvas(canvas){
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  canvas.width = Math.round(rect.width * dpr);
  canvas.height = Math.round(rect.height * dpr);
  const ctx = canvas.getContext('2d');
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  return ctx;
}

function normalPdf(x, mu, sigma){
  const z = (x - mu) / sigma;
  return Math.exp(-0.5 * z * z) / (sigma * Math.sqrt(2 * Math.PI));
}

function draw(mu, sigma){
  const ctx = setupCanvas(pdfCanvas);
  const rect = pdfCanvas.getBoundingClientRect();
  const w = rect.width, h = rect.height;
  ctx.clearRect(0, 0, w, h);

  const L = 50, R = 10, T = 10, B = 30;
  const plotW = w - L - R;
  const plotH = h - T - B;
  const yBase = h - B;

  // x range: mu ± 4*sigma, but at least show -6 to 6
  const xMin = Math.min(-6, mu - 4 * sigma);
  const xMax = Math.max(6, mu + 4 * sigma);
  const ymax = normalPdf(mu, mu, sigma) * 1.15;

  // axes
  ctx.strokeStyle = '#e6e6e6';
  ctx.lineWidth = 1;
  ctx.beginPath(); ctx.moveTo(L, yBase); ctx.lineTo(w - R, yBase); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(L, T); ctx.lineTo(L, yBase); ctx.stroke();

  // x-axis labels
  ctx.font = '11px system-ui, sans-serif';
  ctx.fillStyle = '#777';
  const tickStep = sigma >= 1.5 ? 2 : 1;
  for(let tick = Math.ceil(xMin); tick <= Math.floor(xMax); tick += tickStep){
    const x = L + (tick - xMin) / (xMax - xMin) * plotW;
    ctx.fillText(String(tick), x - 4, h - 10);
  }

  // Draw filled area
  ctx.beginPath();
  ctx.moveTo(L, yBase);
  const steps = 300;
  for(let i = 0; i <= steps; i++){
    const xVal = xMin + (xMax - xMin) * i / steps;
    const x = L + (xVal - xMin) / (xMax - xMin) * plotW;
    const pdf = normalPdf(xVal, mu, sigma);
    const y = yBase - pdf / ymax * plotH;
    ctx.lineTo(x, y);
  }
  ctx.lineTo(L + plotW, yBase);
  ctx.closePath();
  ctx.fillStyle = 'rgba(239, 68, 68, 0.25)';
  ctx.fill();

  // Draw curve
  ctx.beginPath();
  for(let i = 0; i <= steps; i++){
    const xVal = xMin + (xMax - xMin) * i / steps;
    const x = L + (xVal - xMin) / (xMax - xMin) * plotW;
    const pdf = normalPdf(xVal, mu, sigma);
    const y = yBase - pdf / ymax * plotH;
    if(i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }
  ctx.strokeStyle = '#ef4444';
  ctx.lineWidth = 2.5;
  ctx.stroke();

  // Draw vertical line at mu
  const xMu = L + (mu - xMin) / (xMax - xMin) * plotW;
  ctx.beginPath();
  ctx.moveTo(xMu, yBase);
  ctx.lineTo(xMu, yBase - normalPdf(mu, mu, sigma) / ymax * plotH);
  ctx.strokeStyle = '#333';
  ctx.lineWidth = 1.5;
  ctx.setLineDash([4, 4]);
  ctx.stroke();
  ctx.setLineDash([]);

  // Label mu
  ctx.fillStyle = '#333';
  ctx.font = '12px system-ui';
  ctx.fillText('μ', xMu - 4, yBase + 18);
}

function sync(mu, sigma){
  mu = parseFloat(mu);
  sigma = parseFloat(sigma);
  
  if(!Number.isFinite(mu)) mu = 0;
  if(!Number.isFinite(sigma)) sigma = 1;
  
  if(mu < -5) mu = -5;
  if(mu > 5) mu = 5;
  if(sigma < 0.5) sigma = 0.5;
  if(sigma > 3) sigma = 3;

  muSlider.value = mu;
  muNum.value = mu;
  sigmaSlider.value = sigma;
  sigmaNum.value = sigma;
  
  muOut.textContent = mu.toFixed(1);
  sigmaOut.textContent = sigma.toFixed(1);
  varOut.textContent = (sigma * sigma).toFixed(2);

  draw(mu, sigma);
}

muSlider.addEventListener('input', e => sync(e.target.value, sigmaSlider.value));
muNum.addEventListener('input', e => sync(e.target.value, sigmaSlider.value));
sigmaSlider.addEventListener('input', e => sync(muSlider.value, e.target.value));
sigmaNum.addEventListener('input', e => sync(muSlider.value, e.target.value));
window.addEventListener('resize', () => sync(muSlider.value, sigmaSlider.value));

sync(0, 1);
</script>
</body>
</html>
