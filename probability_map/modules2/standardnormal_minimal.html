<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Standard Normal – Minimal Interactive Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    :root{ --bg:#f5f7f9; --panel:#ffffff; --ink:#111; --muted:#555; --border:#dcdcdc; --accent:#ef4444; }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0; font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--ink); background:var(--bg)}
    header{padding:10px 18px; background:#ef4444; color:#fff; font-weight:600}
    .wrap{max-width:1000px; margin:14px auto; padding:0 14px; display:grid; grid-template-columns: 320px 1fr; gap:14px}
    .card{background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:12px}
    .row{display:flex; align-items:center; gap:10px; margin:6px 0; flex-wrap:wrap}
    label{min-width:16px; color:#333; font-weight:600}
    input[type="range"]{width:160px}
    input[type="number"]{width:90px; padding:6px 8px; border:1px solid var(--border); border-radius:8px}
    .kblock{background:#fff; border:1px solid var(--border); border-radius:10px; padding:10px; margin-top:10px}
    .note{color:var(--muted); font-size:13px}
    .plot{background:#fff; border:1px solid var(--border); border-radius:12px; padding:10px}
    .plot h3{margin:0 0 6px 0; font-size:14px}
    canvas{width:100%; height:280px; display:block; background:#fafafa; border-radius:8px}
    @media (max-width: 900px){ .wrap{grid-template-columns: 1fr} }
  </style>
</head>
<body>
<header>Standard Normal Distribution Z ~ N(0, 1)</header>
<main class="wrap">
  <section class="card">
    <div class="row">
      <label for="z">z</label>
      <input id="z" type="range" min="-3.5" max="3.5" step="0.01" value="0">
      <input id="zNum" type="number" min="-3.5" max="3.5" step="0.01" value="0">
      <span class="note">(highlight z-value)</span>
    </div>

    <div class="kblock">
      <div class="note">Key facts</div>
      <ul class="note" style="margin:6px 0 0 16px">
        <li>Support: z ∈ (−∞, +∞)</li>
        <li>PDF: φ(z) = (1/√2π) e^(−z²/2)</li>
        <li>Mean: E[Z] = 0</li>
        <li>Variance: Var[Z] = 1</li>
        <li>If X ~ N(μ,σ²), then Z = (X−μ)/σ ~ N(0,1)</li>
        <li>68-95-99.7 rule: P(|Z|≤1)≈0.68, P(|Z|≤2)≈0.95</li>
      </ul>
    </div>

    <div class="kblock">
      <div class="note">Selected z-value</div>
      <div class="note">
        z = <span id="zOut">0.00</span>
      </div>
      <div class="note">
        φ(z) = <span id="pdfOut">0.399</span>,
        Φ(z) = <span id="cdfOut">0.500</span>
      </div>
    </div>
  </section>

  <section class="card">
    <div class="plot">
      <h3>PDF φ(z)</h3>
      <canvas id="pdf"></canvas>
    </div>
  </section>
</main>

<script>
const zSlider = document.getElementById('z');
const zNum = document.getElementById('zNum');

const zOut = document.getElementById('zOut');
const pdfOut = document.getElementById('pdfOut');
const cdfOut = document.getElementById('cdfOut');
const pdfCanvas = document.getElementById('pdf');

function setupCanvas(canvas){
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  canvas.width = Math.round(rect.width * dpr);
  canvas.height = Math.round(rect.height * dpr);
  const ctx = canvas.getContext('2d');
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  return ctx;
}

function stdNormalPdf(z){
  return Math.exp(-0.5 * z * z) / Math.sqrt(2 * Math.PI);
}

// Approximation of standard normal CDF
function stdNormalCdf(z){
  const a1 =  0.254829592;
  const a2 = -0.284496736;
  const a3 =  1.421413741;
  const a4 = -1.453152027;
  const a5 =  1.061405429;
  const p  =  0.3275911;
  
  const sign = z < 0 ? -1 : 1;
  z = Math.abs(z) / Math.sqrt(2);
  const t = 1.0 / (1.0 + p * z);
  const y = 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t * Math.exp(-z*z);
  return 0.5 * (1.0 + sign * y);
}

function draw(zVal){
  const ctx = setupCanvas(pdfCanvas);
  const rect = pdfCanvas.getBoundingClientRect();
  const w = rect.width, h = rect.height;
  ctx.clearRect(0, 0, w, h);

  const L = 50, R = 10, T = 10, B = 24;
  const plotW = w - L - R;
  const plotH = h - T - B;
  const yBase = h - B;

  const zMin = -4, zMax = 4;
  const ymax = 0.45;

  // axes
  ctx.strokeStyle = '#e6e6e6';
  ctx.lineWidth = 1;
  ctx.beginPath(); ctx.moveTo(L, yBase); ctx.lineTo(w - R, yBase); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(L, T); ctx.lineTo(L, yBase); ctx.stroke();

  // x-axis labels
  ctx.font = '11px system-ui, sans-serif';
  ctx.fillStyle = '#777';
  for(let tick = -3; tick <= 3; tick++){
    const x = L + (tick - zMin) / (zMax - zMin) * plotW;
    ctx.fillText(String(tick), x - 4, h - 6);
  }

  // Draw filled area under curve up to zVal
  ctx.beginPath();
  const startX = L;
  ctx.moveTo(startX, yBase);
  
  const steps = 400;
  const endZ = Math.min(zVal, zMax);
  for(let i = 0; i <= steps; i++){
    const z = zMin + (endZ - zMin) * i / steps;
    const x = L + (z - zMin) / (zMax - zMin) * plotW;
    const y = yBase - stdNormalPdf(z) / ymax * plotH;
    ctx.lineTo(x, y);
  }
  const endX = L + (endZ - zMin) / (zMax - zMin) * plotW;
  ctx.lineTo(endX, yBase);
  ctx.closePath();
  ctx.fillStyle = 'rgba(239, 68, 68, 0.3)';
  ctx.fill();

  // Draw curve
  ctx.beginPath();
  for(let i = 0; i <= steps; i++){
    const z = zMin + (zMax - zMin) * i / steps;
    const x = L + (z - zMin) / (zMax - zMin) * plotW;
    const y = yBase - stdNormalPdf(z) / ymax * plotH;
    if(i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }
  ctx.strokeStyle = '#ef4444';
  ctx.lineWidth = 2.5;
  ctx.stroke();

  // Draw vertical line at zVal
  if(zVal >= zMin && zVal <= zMax){
    const xZ = L + (zVal - zMin) / (zMax - zMin) * plotW;
    const yZ = yBase - stdNormalPdf(zVal) / ymax * plotH;
    ctx.beginPath();
    ctx.moveTo(xZ, yBase);
    ctx.lineTo(xZ, yZ);
    ctx.strokeStyle = '#333';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 4]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Point
    ctx.beginPath();
    ctx.arc(xZ, yZ, 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#ef4444';
    ctx.fill();
  }
}

function sync(z){
  z = parseFloat(z);
  if(!Number.isFinite(z)) z = 0;
  if(z < -3.5) z = -3.5;
  if(z > 3.5) z = 3.5;

  zSlider.value = z.toFixed(2);
  zNum.value = z.toFixed(2);
  zOut.textContent = z.toFixed(2);

  pdfOut.textContent = stdNormalPdf(z).toFixed(3);
  cdfOut.textContent = stdNormalCdf(z).toFixed(3);

  draw(z);
}

zSlider.addEventListener('input', e => sync(e.target.value));
zNum.addEventListener('input', e => sync(e.target.value));
window.addEventListener('resize', () => sync(zSlider.value));

sync(0);
</script>
</body>
</html>
