<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Uniform – Minimal Interactive Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    :root{ --bg:#f5f7f9; --panel:#ffffff; --ink:#111; --muted:#555; --border:#dcdcdc; --accent:#f97316; }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0; font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--ink); background:var(--bg)}
    header{padding:10px 18px; background:#f97316; color:#fff; font-weight:600}
    .wrap{max-width:1000px; margin:14px auto; padding:0 14px; display:grid; grid-template-columns: 320px 1fr; gap:14px}
    .card{background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:12px}
    .row{display:flex; align-items:center; gap:10px; margin:6px 0; flex-wrap:wrap}
    label{min-width:16px; color:#333; font-weight:600}
    input[type="range"]{width:140px}
    input[type="number"]{width:70px; padding:6px 8px; border:1px solid var(--border); border-radius:8px}
    .kblock{background:#fff; border:1px solid var(--border); border-radius:10px; padding:10px; margin-top:10px}
    .note{color:var(--muted); font-size:13px}
    .plot{background:#fff; border:1px solid var(--border); border-radius:12px; padding:10px}
    .plot h3{margin:0 0 6px 0; font-size:14px}
    canvas{width:100%; height:280px; display:block; background:#fafafa; border-radius:8px}
    @media (max-width: 900px){ .wrap{grid-template-columns: 1fr} }
  </style>
</head>
<body>
<header>Uniform Distribution X ~ Unif(a, b)</header>
<main class="wrap">
  <section class="card">
    <div class="row">
      <label for="a">a</label>
      <input id="a" type="range" min="-10" max="9" step="0.5" value="0">
      <input id="aNum" type="number" min="-10" max="9" step="0.1" value="0">
      <span class="note">(lower bound)</span>
    </div>
    <div class="row">
      <label for="b">b</label>
      <input id="b" type="range" min="-9" max="10" step="0.5" value="1">
      <input id="bNum" type="number" min="-9" max="10" step="0.1" value="1">
      <span class="note">(upper bound)</span>
    </div>

    <div class="kblock">
      <div class="note">Key facts</div>
      <ul class="note" style="margin:6px 0 0 16px">
        <li>Support: x ∈ [a, b]</li>
        <li>PDF: f(x) = 1/(b−a) for x ∈ [a,b]</li>
        <li>CDF: F(x) = (x−a)/(b−a)</li>
        <li>Mean: E[X] = (a+b)/2</li>
        <li>Variance: Var[X] = (b−a)²/12</li>
        <li>Special case: a=0, b=1 gives Standard Uniform</li>
      </ul>
    </div>

    <div class="kblock">
      <div class="note">Parameters</div>
      <div class="note">
        a = <span id="aOut">0.0</span>,
        b = <span id="bOut">1.0</span>
      </div>
      <div class="note">
        E[X] = <span id="meanOut">0.500</span>,
        Var[X] = <span id="varOut">0.083</span>
      </div>
      <div class="note">
        f(x) = <span id="pdfOut">1.000</span> on [a, b]
      </div>
    </div>
  </section>

  <section class="card">
    <div class="plot">
      <h3>PDF f(x)</h3>
      <canvas id="pdf"></canvas>
    </div>
  </section>
</main>

<script>
const aSlider = document.getElementById('a');
const aNum = document.getElementById('aNum');
const bSlider = document.getElementById('b');
const bNum = document.getElementById('bNum');

const aOut = document.getElementById('aOut');
const bOut = document.getElementById('bOut');
const meanOut = document.getElementById('meanOut');
const varOut = document.getElementById('varOut');
const pdfOut = document.getElementById('pdfOut');
const pdfCanvas = document.getElementById('pdf');

function setupCanvas(canvas){
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  canvas.width = Math.round(rect.width * dpr);
  canvas.height = Math.round(rect.height * dpr);
  const ctx = canvas.getContext('2d');
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  return ctx;
}

function draw(a, b){
  const ctx = setupCanvas(pdfCanvas);
  const rect = pdfCanvas.getBoundingClientRect();
  const w = rect.width, h = rect.height;
  ctx.clearRect(0, 0, w, h);

  const L = 50, R = 30, T = 20, B = 30;
  const plotW = w - L - R;
  const plotH = h - T - B;
  const yBase = h - B;

  const range = b - a;
  const pdfHeight = 1 / range;
  
  const margin = range * 0.3;
  const xMin = a - margin;
  const xMax = b + margin;
  const ymax = pdfHeight * 1.3;

  // axes
  ctx.strokeStyle = '#e6e6e6';
  ctx.lineWidth = 1;
  ctx.beginPath(); ctx.moveTo(L, yBase); ctx.lineTo(w - R, yBase); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(L, T); ctx.lineTo(L, yBase); ctx.stroke();

  // x-axis labels
  ctx.font = '11px system-ui, sans-serif';
  ctx.fillStyle = '#777';
  const xaPos = L + (a - xMin) / (xMax - xMin) * plotW;
  const xbPos = L + (b - xMin) / (xMax - xMin) * plotW;
  ctx.fillText(a.toFixed(1), xaPos - 10, h - 10);
  ctx.fillText(b.toFixed(1), xbPos - 10, h - 10);

  // y-axis label for PDF height
  const yTop = yBase - pdfHeight / ymax * plotH;
  ctx.fillText(pdfHeight.toFixed(2), L - 35, yTop + 4);

  // Draw filled rectangle
  ctx.fillStyle = 'rgba(249, 115, 22, 0.3)';
  ctx.fillRect(xaPos, yTop, xbPos - xaPos, yBase - yTop);

  // Draw rectangle PDF outline
  ctx.strokeStyle = '#f97316';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  // Left side (outside)
  ctx.moveTo(L, yBase);
  ctx.lineTo(xaPos, yBase);
  // Jump up
  ctx.moveTo(xaPos, yBase);
  ctx.lineTo(xaPos, yTop);
  // Top
  ctx.lineTo(xbPos, yTop);
  // Jump down
  ctx.lineTo(xbPos, yBase);
  // Right side (outside)
  ctx.lineTo(w - R, yBase);
  ctx.stroke();
}

function sync(a, b){
  a = parseFloat(a);
  b = parseFloat(b);
  
  if(!Number.isFinite(a)) a = 0;
  if(!Number.isFinite(b)) b = 1;
  
  // Ensure a < b
  if(a >= b) b = a + 0.5;
  
  if(a < -10) a = -10;
  if(a > 9) a = 9;
  if(b < -9) b = -9;
  if(b > 10) b = 10;

  aSlider.value = a;
  aNum.value = a;
  bSlider.value = b;
  bNum.value = b;
  
  aOut.textContent = a.toFixed(1);
  bOut.textContent = b.toFixed(1);

  const mean = (a + b) / 2;
  const variance = Math.pow(b - a, 2) / 12;
  const pdfVal = 1 / (b - a);
  
  meanOut.textContent = mean.toFixed(3);
  varOut.textContent = variance.toFixed(3);
  pdfOut.textContent = pdfVal.toFixed(3);

  draw(a, b);
}

aSlider.addEventListener('input', e => sync(e.target.value, bSlider.value));
aNum.addEventListener('input', e => sync(e.target.value, bSlider.value));
bSlider.addEventListener('input', e => sync(aSlider.value, e.target.value));
bNum.addEventListener('input', e => sync(aSlider.value, e.target.value));
window.addEventListener('resize', () => sync(aSlider.value, bSlider.value));

sync(0, 1);
</script>
</body>
</html>
